<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BR8N0J5807"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-BR8N0J5807');
    </script>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>Mutation testing for Swift with Mull: how it could work. Looking for contributors.</title>
        <link rel="stylesheet" href="./theme/css/main.css" />
        <meta name="description" content="Short summary" />
        <script src="https://kit.fontawesome.com/430941314f.js" crossorigin="anonymous"></script>
</head>

<body id="index">
<mottto-container class="color:base">
        <mottto-aside>
                <mottto-header class="color:aside">
                        <div class="site_name">TECH NOTES</div><div class="site_subname"> by Stanislav Pankevich</div></mottto-header>
                <mottto-nav class="color:aside">
                        <nav class="site_nav">
                        <!-- a href="./">Home</!-->
                                <a  href="./pages/about.html">About</a>
                                <a  class="active" href="./category/posts.html">Posts</a>
                        </nav>
                </mottto-nav>
                <mottto-toc class="color:aside">
  <a class="article_url"
    href="./2018-09-03-mull-and-swift-how-it-almost-works.html"
    rel="bookmark"
    title="Permalink to Mutation testing for Swift with Mull: how it could work. Looking for contributors.">
    Mutation testing for Swift with Mull: how it could work. Looking for contributors.
  </a>
    <div class="article_toc"><div id="toc"><ul><li><a class="toc-href" href="#tldr" title="TL;DR">TL;DR</a></li><li><a class="toc-href" href="#what-has-been-done-so-far-and-what-is-missing" title="What has been done so far and what is missing?">What has been done so far and what is missing?</a></li><li><a class="toc-href" href="#the-challenge" title="The challenge">The challenge</a></li><li><a class="toc-href" href="#why-do-you-not-do-it-yourself" title="Why do you not do it yourself?">Why do you not do it yourself?</a></li><li><a class="toc-href" href="#what-can-i-do-if-i-want-mutation-testing-for-swift" title="What can I do if I want mutation testing for Swift?">What can I do if I want mutation testing for Swift?</a></li></ul></div></div>
                </mottto-toc>
                <mottto-footer></mottto-footer>
        </mottto-aside>
        <mottto-main class="color:main">
                <main>

  <article data-display="article">
    <header>
      <h1>Mutation testing for Swift with Mull: how it could work. Looking for contributors.</h1>
    </header>

    <div class="widget-twitter"><a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="sbpankevich">Tweet</a><script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script>
</div>
<aside>
        <time class="published" title="2018-09-03T11:00:00+02:00">
                2018-09-03
        </time>


<div class="taglist"><a class="tag" href="./tag/mull.html">Mull</a> <a class="tag" href="./tag/llvm.html">LLVM</a> </div>
</aside>
    <div class="section" id="tl-dr">
<h2 id="tldr">TL;DR</h2>
<p>Mull, mutation testing tool based on LLVM, can work with code written in Swift
but the code to find mutations on AST level is missing. We are focusing more on
C and C++ programming languages and therefore are looking for contributors who
could help us to continue our work on Objective-C and Swift support.</p>
</div>
<div class="section" id="what-has-been-done-so-far-and-what-is-missing">
<h2 id="what-has-been-done-so-far-and-what-is-missing">What has been done so far and what is missing?</h2>
<p>A good part of the work is done: we can run Swift with Objective-C
interoperability enabled with LLVM JIT, see <a class="reference external" href="/2018-09-03-llvm-jit-objc-and-swift-knowledge-dump.html">LLVM JIT, Objective-C and Swift on
macOS: knowledge dump</a>.</p>
<p>There is an extremely hacky branch on Mull with which we are able to run Mull on
Swift/Objective-C code. The problem there is that Mull finds too many useless
mutations in the LLVM IR code generated by Swift compiler and there is no good
way to filter these mutations out. Such useless mutations are called "junk
mutations" because they cannot be achieved by a mutation of a source code, so
for a programmer it is not possible to write tests that would kill such
mutations. Usually these mutations are found in the boilerplate code generated
by a compiler, not in the code that is written by a human, so it does not make
sense to highlight these mutations to a programmer who is working with a
mutation testing tool.</p>
</div>
<div class="section" id="the-challenge">
<h2 id="the-challenge">The challenge</h2>
<p>A finer-grained approach to find the right mutations in Swift code is needed.</p>
<p>Mull finds garbage mutations in C/C++ too, but for these languages there is a
class <tt class="docutils literal">CXXJunkDetector</tt> that uses libClang to check the AST information. The
AST information helps Mull to find the right mutations that trace back to the
source code and filter out everything else.</p>
<p>A similar approach is needed for Swift. But in contrast to C/C++, we believe
that instead of filtering the junk mutations out of all of the mutations found
on the LLVM IR level ("blacklisting"), the proper implementation should rather
find the right mutations in the source code on the AST level and then pass the
information about found mutations to the LLVM IR level where Mull can use it to
perform mutations and execute the mutated versions of the program. In this
scenario we see Mull as a backend for mutation testing which works with the
mutations found by a mutation testing frontend for Swift code that finds
mutations on the Swift AST level.</p>
</div>
<div class="section" id="why-do-you-not-do-it-yourself">
<h2 id="why-do-you-not-do-it-yourself">Why do you not do it yourself?</h2>
<p>We have a number of reasons to put our work on Swift and Objective-C to a
low-priority background thread.</p>
<p>The first and foremost reason is that we no longer work with Swift programming
language. We started working on Mull when we were iOS developers but since then
we have spent quite some time working with C/C++ languages and now we work with
these languages at our day jobs.</p>
<p>The second reason is that we don't see enough interest in mutation testing from
iOS and macOS communities. It looks like mutation testing coverage is not
something that iOS/macOS testing experts are up to. We would be happy to learn
that we are wrong about this though.</p>
<p>The third reason: we think that we have managed to get LLVM JIT with Swift
working, but even if Mull works with Swift, it will only run on macOS. Support
for iOS will be a whole another story.</p>
</div>
<div class="section" id="what-can-i-do-if-i-want-mutation-testing-for-swift">
<h2 id="what-can-i-do-if-i-want-mutation-testing-for-swift">What can I do if I want mutation testing for Swift?</h2>
<p>You can contact us and we will provide you with pointers on how to proceed. You
will most likely have to do some hacking on Swift AST and LLVM code to find the
mutations in the Swift source code that Mull will execute. From our side we
could help you to understand the design and implementation details of Mull -
everything you might need to get the whole thing working.</p>
<p>The contact information can be found on the <a class="reference external" href="https://github.com/mull-project/mull">Mull's README page</a>.</p>
</div>


  </article>

                        <footer class="color:footer">
                                <section class="social">
                                        <h4>Social</h4>
                                        <ul>

                                                <li><a href="https://github.com/stanislaw">stanislaw</a></li>
                                                <li><a href="https://stackoverflow.com/users/598057/stanislav-pankevich">stanislav-pankevich</a></li>
                                                <li><a href="https://www.linkedin.com/in/stanislavpankevich">stanislavpankevich</a></li>
                                        </ul>
                                </section><!-- /.social -->
                                <section class="blogroll">
                                        <h4>Links</h4>
                                        <ul>
                                                <li><a href="https://github.com/strictdoc-project/strictdoc">StrictDoc project (requirements management)</a></li>
                                                <li><a href="https://github.com/mull-project/mull">Mull project (mutation testing)</a></li>
                                                <li><a href="https://github.com/stanislaw/awesome-safety-critical">awesome-safety-critical (reading list)</a></li>
                                        </ul>
                                </section><!-- /.blogroll -->
                                <address>
                                Built with <a href="https://getpelican.com/">Pelican</a>.
                                </address>
                        </footer>

                </main><!-- /main -->
        </mottto-main>
</mottto-container>

</body>
</html>